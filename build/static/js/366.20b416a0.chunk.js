"use strict";(self.webpackChunkpravas_client=self.webpackChunkpravas_client||[]).push([[366],{52366:function(e,i,n){n.r(i);var r=n(29439),o=n(72791),s=n(60220),a=n(5849),t=n(4708),d=n(93006),l=n(64554),u=n(88588),c=n(33553),v=n(4567),p=n(10266),h=n(36395),m=n(57012),w=n(11087),Z=n(57689),f=n(66934),x=n(87711),b=n(19773),g=n(59434),j=n(55705),y=n(43725),P=n(3746),q=n(20165),S=n(90977),C=n(97808),_=n(32295),D=n(80184),M=(0,y.Z)({hasPassword:!0}),k={oldPassword:"",password:"",confirmPassword:""},z=((0,f.ZP)(w.OL)({textDecoration:"none"}),(0,h.Z)());i.default=function(e){var i=(0,o.useState)(""),n=(0,r.Z)(i,2),h=n[0],w=n[1],f=(0,o.useState)(""),y=(0,r.Z)(f,2),A=y[0],E=y[1],T=(0,o.useState)(""),L=(0,r.Z)(T,2),R=L[0],N=L[1],F=(0,o.useState)(!1),I=(0,r.Z)(F,2),B=I[0],O=I[1],V=(0,o.useState)(!1),W=(0,r.Z)(V,2),$=W[0],G=W[1],J=(0,o.useState)(!1),Y=(0,r.Z)(J,2),H=Y[0],Q=Y[1],U=(0,Z.s0)(),X=(0,g.I0)(),K=(0,Z.UO)().token,ee=(0,g.v9)(_.oV),ie=function(){O(!B)},ne=function(e){e.preventDefault()},re=function(){sessionStorage.clear(),X((0,_.X2)())},oe=function(){null!==ee&&void 0!==ee&&ee._id&&(K=sessionStorage.getItem("aToken")),x.Z.validateToken(K).then((function(e){var i,n,r,o,s,a;null!==ee&&void 0!==ee&&ee._id||((null===e||void 0===e||null===(i=e.data)||void 0===i||null===(n=i.data)||void 0===n||null===(r=n.userActivityDetails)||void 0===r?void 0:r.passwordTimeStamp)>(null===e||void 0===e||null===(o=e.data)||void 0===o||null===(s=o.data)||void 0===s||null===(a=s.userActivityDetails)||void 0===a?void 0:a.sentEmailTimeStamp)?Q(!0):Q(!1))})).catch((function(e){console.error(e),G(!0),re()}))};return(0,o.useEffect)((function(){oe()}),[]),(0,D.jsx)(m.Z,{theme:z,children:(0,D.jsxs)(p.Z,{component:"main",maxWidth:"xs",children:[(0,D.jsx)(t.ZP,{}),(0,D.jsx)(j.J9,{initialValues:k,validationSchema:M,onSubmit:function(e,i){var n=i.resetForm;null===e||void 0===e||delete e.confirmPassword,oe();var r=Date.now(),o=null!==ee&&void 0!==ee&&ee._id?h:void 0;!$&&x.Z.resetPassword(e.password,K,r,o).then((function(e){var i,r=(null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.message)||"Successfully changed ....";(0,b.Qm)(r,3e3),n({values:k}),re(),null!==ee&&void 0!==ee&&ee._id?U("login"):U("/login")})).catch((function(e){var i;console.error(e),n({values:k}),E(""),w("");var r=(null===e||void 0===e||null===(i=e.response.data)||void 0===i?void 0:i.message)||"Couldn't changed Successfully....";(0,b.Jc)(r)}))},children:function(e){var i,n=e.values,r=e.errors,o=e.isValid,t=(e.dirty,e.touched),p=e.handleBlur,m=e.handleChange,Z=e.handleSubmit;return(0,D.jsx)("form",{onSubmit:Z,children:(0,D.jsx)(u.Z,{variant:"elevation",sx:{p:3,pt:0},children:(0,D.jsxs)(l.Z,{sx:{marginTop:6,marginBottom:1,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,D.jsx)(s.Z,{sx:{m:1,bgcolor:"secondary.main"},children:(0,D.jsx)(c.Z,{})}),(0,D.jsx)(v.Z,{component:"h1",variant:"h5",children:"Change Password"}),(0,D.jsx)("br",{}),$?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(v.Z,{component:"p",variant:"caption",children:(0,D.jsx)("b",{children:"This link has been expired... "})}),(0,D.jsx)("br",{}),(0,D.jsx)(a.Z,{type:"button",variant:"contained",onClick:function(){return U("/reset-password")},children:"Resend Link"})]}):H?(0,D.jsx)(D.Fragment,{children:(0,D.jsxs)(l.Z,{sx:{display:"flex",textAlign:"center",flexDirection:"column"},children:[(0,D.jsx)(v.Z,{component:"p",variant:"caption",children:(0,D.jsx)("b",{children:"This was One Time Password reset Link "})}),(0,D.jsx)("br",{}),(0,D.jsx)(v.Z,{component:"p",variant:"caption",color:"red",children:(0,D.jsx)("i",{children:(0,D.jsx)("b",{children:"You Already have Changed Password.."})})})]})}):(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(v.Z,{component:"p",variant:"caption",children:["Set ",(0,D.jsx)("b",{children:"New Password"})," and click on button"]}),!ee._id&&(0,D.jsx)(l.Z,{sx:{display:"flex",textAlign:"center",p:0,m:0},children:(0,D.jsxs)(v.Z,{component:"p",variant:"caption",children:[(0,D.jsx)("label",{style:{display:"block",color:"red"},children:"Be Careful !!.."}),(0,D.jsxs)("b",{children:["You can Change your Password After",(0,D.jsx)("em",{children:" few minutes "}),", Once you changed it....."]})]})}),(0,D.jsxs)(l.Z,{sx:{mt:1},children:[(null===ee||void 0===ee?void 0:ee._id)&&(0,D.jsx)(D.Fragment,{children:(0,D.jsx)(d.Z,{sx:{mb:3},margin:"normal",required:!0,fullWidth:!0,id:"old-password",label:"Old Password",name:"oldPassword",value:h,autoComplete:"password",autoFocus:!0,onBlur:p,type:"password",size:"small",onChange:function(e){var i;w(null===e||void 0===e||null===(i=e.target)||void 0===i?void 0:i.value)},error:!(null===t||void 0===t||!t.oldPassword||""!=h),helperText:null!==t&&void 0!==t&&t.oldPassword&&""==h?"password required":""})}),(0,D.jsx)(d.Z,{margin:"normal",required:!0,fullWidth:!0,id:"password",label:"New Password",name:"password",value:null===n||void 0===n?void 0:n.password,autoComplete:"password",size:"small",onChange:m,type:B?"text":"password",onBlur:function(e){p(e),N("")},onFocus:function(){return N("password")},InputLabelProps:{shrink:"password"==R||0!=(null===n||void 0===n||null===(i=n.password)||void 0===i?void 0:i.length)},InputProps:{startAdornment:(0,D.jsx)(C.Z,{position:"end",sx:{order:2,mr:"1em"},children:(0,D.jsx)(S.Z,{"aria-label":"toggle password visibility",onClick:ie,onMouseDown:ne,edge:"end",children:B?(0,D.jsx)(q.Z,{}):(0,D.jsx)(P.Z,{})})})},error:!(null===t||void 0===t||!t.password||null===r||void 0===r||!r.password)||(null===n||void 0===n?void 0:n.password)==h&&""!=h,helperText:null!==t&&void 0!==t&&t.password&&null!==r&&void 0!==r&&r.password?null===r||void 0===r?void 0:r.password:(null===n||void 0===n?void 0:n.password)==h&&""!=h?"Can't be Old Password":""}),(0,D.jsx)(d.Z,{margin:"normal",required:!0,fullWidth:!0,id:"confirm-password",label:"Confirm Password",name:"confirmPassword",value:A,autoComplete:"password",onBlur:p,type:"password",size:"small",disabled:!(null===n||void 0===n||!n.password||!A)&&(null===n||void 0===n?void 0:n.password)==A,onChange:function(e){var i;E(null===e||void 0===e||null===(i=e.target)||void 0===i?void 0:i.value)},error:!(null===t||void 0===t||!t.confirmPassword||(null===n||void 0===n?void 0:n.password)==A),helperText:null!==t&&void 0!==t&&t.confirmPassword&&(null===n||void 0===n?void 0:n.password)!=A?"incorrect password":""}),(0,D.jsx)(a.Z,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:null!==ee&&void 0!==ee&&ee._id?!o||h==((null===n||void 0===n?void 0:n.password)||"")||""==(null===n||void 0===n?void 0:n.password)||(null===n||void 0===n?void 0:n.password)!=A:!o||""==(null===n||void 0===n?void 0:n.password)||A!=(null===n||void 0===n?void 0:n.password),children:"Change Password"})]})]})]})})})}})]})})}},43725:function(e,i,n){var r=n(81724);i.Z=function(e){var i=e.hasFirst,n=void 0!==i&&i,o=e.hasLast,s=void 0!==o&&o,a=e.hasMobile,t=void 0!==a&&a,d=e.hasEmail,l=void 0!==d&&d,u=e.hasStreet,c=void 0!==u&&u,v=e.hasCity,p=void 0!==v&&v,h=e.hasState,m=void 0!==h&&h,w=e.hasCountry,Z=void 0!==w&&w,f=e.hasPincode,x=void 0!==f&&f,b=e.hasPassword,g=void 0!==b&&b,j=e.hasRole,y=void 0!==j&&j,P=e.hasDob,q=void 0!==P&&P,S=e.hasGender,C=void 0!==S&&S,_=e.hasAvatar,D=void 0!==_&&_,M=e.hasStatus,k=void 0!==M&&M,z=e.hasDesignation,A=void 0!==z&&z,E={},T={},L={};return n&&(T.first=r.Z_().required("First Name is required")),s&&(T.last=r.Z_().required("Last Name is required")),(n||s)&&(E.name=r.Ry(T)),t&&(E.mobile=r.Z_().required().matches(/^[0-9]{10}$/,"Mobile Must be 10 Digit")),l&&(E.email=r.Z_().required().matches(/^[\w-\.]+@([\w-]+\.)+[\w-]{2,6}$/,"Enter valid Email Address")),c&&(L.street=r.Z_().required("Street is required")),p&&(L.city=r.Z_().required("Address is required")),m&&(L.state=r.Z_().required("State is required")),Z&&(L.country=r.Z_().required("Country is required")),x&&(L.pincode=r.Z_().required("Pincode is required")),(c||p||m||Z||x)&&(E.address=r.Ry(L)),g&&(E.password=r.Z_().required().matches(/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/,"Password must have min 8 characters and 1 cap & small letter, Symbol")),y&&(E.role=r.Z_().required("Role is required")),q&&(E.dob=r.hT().required("Birth date is required").min(new Date(Date.now()-3784e9),"Date is too old, must be within 120 year back than now").max(new Date(Date.now()),"Date is greater than todays Date")),C&&(E.gender=r.Z_().required("Gender is required")),D&&(E.avatar=r.Z_().required("Avatar is required")),k&&(E.status=r.Z_().required("Status is required")),A&&(E.designation=r.Z_().required("Designation is required")),r.Ry().shape(E)}},3746:function(e,i,n){var r=n(64836);i.Z=void 0;var o=r(n(45649)),s=n(80184),a=(0,o.default)((0,s.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}),"Visibility");i.Z=a},20165:function(e,i,n){var r=n(64836);i.Z=void 0;var o=r(n(45649)),s=n(80184),a=(0,o.default)((0,s.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"}),"VisibilityOff");i.Z=a},88588:function(e,i,n){var r=n(87462),o=n(63366),s=n(72791),a=n(28182),t=n(94419),d=n(66934),l=n(31402),u=n(4841),c=n(56211),v=n(80184),p=["className","raised"],h=(0,d.ZP)(u.Z,{name:"MuiCard",slot:"Root",overridesResolver:function(e,i){return i.root}})((function(){return{overflow:"hidden"}})),m=s.forwardRef((function(e,i){var n=(0,l.Z)({props:e,name:"MuiCard"}),s=n.className,d=n.raised,u=void 0!==d&&d,m=(0,o.Z)(n,p),w=(0,r.Z)({},n,{raised:u}),Z=function(e){var i=e.classes;return(0,t.Z)({root:["root"]},c.y,i)}(w);return(0,v.jsx)(h,(0,r.Z)({className:(0,a.default)(Z.root,s),elevation:u?8:void 0,ref:i,ownerState:w},m))}));i.Z=m},56211:function(e,i,n){n.d(i,{y:function(){return s}});var r=n(75878),o=n(21217);function s(e){return(0,o.Z)("MuiCard",e)}var a=(0,r.Z)("MuiCard",["root"]);i.Z=a},97808:function(e,i,n){var r,o=n(4942),s=n(63366),a=n(87462),t=n(72791),d=n(28182),l=n(94419),u=n(14036),c=n(4567),v=n(93840),p=n(52930),h=n(66934),m=n(13209),w=n(31402),Z=n(80184),f=["children","className","component","disablePointerEvents","disableTypography","position","variant"],x=(0,h.ZP)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:function(e,i){var n=e.ownerState;return[i.root,i["position".concat((0,u.Z)(n.position))],!0===n.disablePointerEvents&&i.disablePointerEvents,i[n.variant]]}})((function(e){var i=e.theme,n=e.ownerState;return(0,a.Z)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(i.vars||i).palette.action.active},"filled"===n.variant&&(0,o.Z)({},"&.".concat(m.Z.positionStart,"&:not(.").concat(m.Z.hiddenLabel,")"),{marginTop:16}),"start"===n.position&&{marginRight:8},"end"===n.position&&{marginLeft:8},!0===n.disablePointerEvents&&{pointerEvents:"none"})})),b=t.forwardRef((function(e,i){var n=(0,w.Z)({props:e,name:"MuiInputAdornment"}),o=n.children,h=n.className,b=n.component,g=void 0===b?"div":b,j=n.disablePointerEvents,y=void 0!==j&&j,P=n.disableTypography,q=void 0!==P&&P,S=n.position,C=n.variant,_=(0,s.Z)(n,f),D=(0,p.Z)()||{},M=C;C&&D.variant,D&&!M&&(M=D.variant);var k=(0,a.Z)({},n,{hiddenLabel:D.hiddenLabel,size:D.size,disablePointerEvents:y,position:S,variant:M}),z=function(e){var i=e.classes,n=e.disablePointerEvents,r=e.hiddenLabel,o=e.position,s=e.size,a=e.variant,t={root:["root",n&&"disablePointerEvents",o&&"position".concat((0,u.Z)(o)),a,r&&"hiddenLabel",s&&"size".concat((0,u.Z)(s))]};return(0,l.Z)(t,m.w,i)}(k);return(0,Z.jsx)(v.Z.Provider,{value:null,children:(0,Z.jsx)(x,(0,a.Z)({as:g,ownerState:k,className:(0,d.default)(z.root,h),ref:i},_,{children:"string"!==typeof o||q?(0,Z.jsxs)(t.Fragment,{children:["start"===S?r||(r=(0,Z.jsx)("span",{className:"notranslate",children:"\u200b"})):null,o]}):(0,Z.jsx)(c.Z,{color:"text.secondary",children:o})}))})}));i.Z=b},13209:function(e,i,n){n.d(i,{w:function(){return s}});var r=n(75878),o=n(21217);function s(e){return(0,o.Z)("MuiInputAdornment",e)}var a=(0,r.Z)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);i.Z=a}}]);
//# sourceMappingURL=366.20b416a0.chunk.js.map