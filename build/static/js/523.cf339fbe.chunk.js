"use strict";(self.webpackChunkpravas_client=self.webpackChunkpravas_client||[]).push([[523],{42523:function(e,i,t){t.r(i),t.d(i,{default:function(){return F}});var n=t(93433),l=t(4942),o=t(29439),s=t(1413),r=t(72791),a=t(13034),d=t(10266),u=t(45363),c=t(25801),v=t(59969),h=t(17133),g=t(81153),x=t(4841),p=t(5849),f=t(64554),m=t(4567),Z=t(93006),j=t(85771),y=t(5282),b=t.n(y),T=t(80184),P=function(e){var i=e.setValue,t=e.formData,n=r.useRef(null),l=(0,r.useState)(""),a=(0,o.Z)(l,2),d=a[0],u=a[1];return(0,r.useEffect)((function(){i((0,s.Z)((0,s.Z)({},t),{},{richText:d}))}),[d]),(0,r.useEffect)((function(){u(null===t||void 0===t?void 0:t.richText)}),[null===t||void 0===t?void 0:t.richText]),(0,T.jsx)(b(),{ref:n,onChange:function(e){u(e)},value:d})},C=t(76896),S=t(6445),D=t(55705),q=function(e){var i=e.has_id,t=void 0!==i&&i,n=e.hasBlogId,l=void 0!==n&&n,o=e.hasTitle,s=void 0!==o&&o,r=e.hasRichText,a=void 0!==r&&r,d=e.hasSeoTitle,u=void 0!==d&&d,c=e.hasMetaDescription,v=void 0!==c&&c,h=e.hasFocusKeyphrases,g=void 0!==h&&h,x=e.hasSlug,p=void 0!==x&&x,f=e.hasCategories,m=void 0!==f&&f,Z=e.hasTags,j=void 0!==Z&&Z,y=e.hasImage,b=void 0!==y&&y,T=e.hasBlogStatus,P=void 0!==T&&T,C=e.hasCreationDate,S=void 0!==C&&C,D={};return t&&(D._id=""),l&&(D.blogId=NaN),s&&(D.title=""),a&&(D.richText=""),u&&(D.seoTitle=""),v&&(D.metaDescription=""),g&&(D.focusKeyphrases=""),p&&(D.slug=""),m&&(D.categories=[""]),j&&(D.tags=[""]),b&&(D.image=""),P&&(D.blogStatus=!1),S&&(D.creationDate=""),D},k=t(81724),B=function(e){e.has_id;var i=e.hasBlogId,t=void 0!==i&&i,n=e.hasTitle,l=void 0!==n&&n,o=e.hasRichText,s=void 0!==o&&o,r=e.hasSeoTitle,a=void 0!==r&&r,d=e.hasMetaDescription,u=void 0!==d&&d,c=e.hasFocusKeyphrases,v=void 0!==c&&c,h=e.hasSlug,g=void 0!==h&&h,x=e.hasCategories,p=void 0!==x&&x,f=e.hasTags,m=void 0!==f&&f,Z=e.hasImage,j=void 0!==Z&&Z,y=e.hasBlogStatus,b=void 0!==y&&y,T={};return t&&(T.blogId=k.Rx().required("Blob-Id is required")),l&&(T.title=k.Z_().required("Title is required")),s&&(T.richText=k.Z_().required("Rich-text is required")),a&&(T.seoTitle=k.Z_().required("SEO title is required")),u&&(T.metaDescription=k.Z_().required("Meta-Description is required")),v&&(T.focusKeyphrases=k.Z_().required("Focus-key-phrases is required")),g&&(T.slug=k.Z_().required("Slug is required")),p&&(T.categories=k.IX().required("Categories are required")),m&&(T.tags=k.IX().required("Tags are required")),j&&(T.image=k.Z_().required("Image is required")),b&&(T.blogStatus=k.Z_().required("BlogStatus is required")),k.Ry().shape(T)},w=t(19773),K=t(15238),z=t(57689),A={hasTitle:!0,hasSeoTitle:!0,hasMetaDescription:!0,hasSlug:!0},I=q((0,s.Z)((0,s.Z)({},A),{},{hasFocusKeyphrases:!0,hasRichText:!0,hasCategories:!0,hasTags:!0,hasImage:!0})),R=B((0,s.Z)({},A)),F=function(e){var i=(0,r.useState)({category:!1,keyPhases:!1,tags:!1}),t=(0,o.Z)(i,2),y=t[0],b=t[1],q=(0,r.useState)({category:!1,keyPhases:!1,tags:!1}),k=(0,o.Z)(q,2),B=k[0],A=k[1],F=r.useState(""),_=(0,o.Z)(F,2),O=(_[0],_[1]),E=r.useState(""),L=(0,o.Z)(E,2),W=L[0],N=L[1],V=r.useState(""),J=(0,o.Z)(V,2),M=J[0],U=J[1],X=r.useState([]),Q=(0,o.Z)(X,2),G=Q[0],H=Q[1],Y=r.useState(""),$=(0,o.Z)(Y,2),ee=$[0],ie=$[1],te=r.useState([]),ne=(0,o.Z)(te,2),le=ne[0],oe=ne[1],se=(0,z.UO)().id,re=(0,r.useState)(""),ae=(0,o.Z)(re,2),de=ae[0],ue=ae[1],ce=(0,r.useState)(["Destination","Place To Visit","Best Time To Travel","Experiance"]),ve=(0,o.Z)(ce,2),he=ve[0],ge=ve[1],xe=r.useState({title:"",richText:"",seoTitle:"",metaDescription:"",focusKeyphrases:"",slug:"",categories:[],tags:[],image:"",creationDate:""}),pe=(0,o.Z)(xe,2),fe=pe[0],me=pe[1],Ze=function(e){var i=null===e||void 0===e?void 0:e.target,t=i.name,n=i.value;"tags"==t?U(n):"focusKeyphrases"==t?ie(n):me((0,s.Z)((0,s.Z)({},fe),{},(0,l.Z)({},t,n)))},je=function(){var e=de;he.filter((function(e){return e.toLowerCase()})).includes(e.toLowerCase())||ge([].concat((0,n.Z)(he),[e])),ue("")},ye=function(e){var i=[],t="";if("tag"==e?(i=G,t=M):"focusKeyphrases"==e&&(i=le,t=ee),""!=t){var l=[];l=i.filter((function(e){return e.toLowerCase()})).includes(t.toLowerCase())?i:[].concat((0,n.Z)(i),[t.toLowerCase()]),"tag"==e?(H(l),U("")):"focusKeyphrases"==e&&(oe(l),ie(""))}},be=function(e){y[e]?A((0,s.Z)((0,s.Z)({},B),{},(0,l.Z)({},e,!1))):(b((0,s.Z)((0,s.Z)({},y),{},(0,l.Z)({},e,!0))),A((0,s.Z)((0,s.Z)({},B),{},(0,l.Z)({},e,!0))))};return(0,r.useEffect)((function(){se&&K.Z.fetchOneBlog(se).then((function(e){var i;me(null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.data)})).catch((function(e){console.error(e)}))}),[se]),console.log("formData :",fe),(0,T.jsx)(T.Fragment,{children:(0,T.jsxs)(d.Z,{sx:{my:3},children:[(0,T.jsxs)(g.ZP,{container:!0,spacing:2,sx:{pb:2},children:[(0,T.jsx)(g.ZP,{item:!0,children:(0,T.jsx)(m.Z,{variant:"h5",sx:{fontWeight:500},children:"Post"})}),(0,T.jsx)(g.ZP,{item:!0,children:(0,T.jsx)(p.Z,{variant:"contained",children:"Add New"})})]}),(0,T.jsx)(D.J9,{initialValues:I,enableReinitialize:!0,validationSchema:R,onSubmit:function(e,i){var t=i.resetForm;fe.tags=G,fe.creationDate="".concat(Date.now()),fe.focusKeyphrases=null===le||void 0===le?void 0:le.join(", ");var n=new FormData;null!==fe&&void 0!==fe&&fe.title&&n.append("title",null===fe||void 0===fe?void 0:fe.title),null!==fe&&void 0!==fe&&fe.richText&&n.append("richText",null===fe||void 0===fe?void 0:fe.richText),null!==fe&&void 0!==fe&&fe.seoTitle&&n.append("seoTitle",null===fe||void 0===fe?void 0:fe.seoTitle),null!==fe&&void 0!==fe&&fe.metaDescription&&n.append("metaDescription",null===fe||void 0===fe?void 0:fe.metaDescription),null!==fe&&void 0!==fe&&fe.focusKeyphrases&&n.append("focusKeyphrases",null===fe||void 0===fe?void 0:fe.focusKeyphrases),null!==fe&&void 0!==fe&&fe.slug&&n.append("slug",null===fe||void 0===fe?void 0:fe.slug),null!==fe&&void 0!==fe&&fe.creationDate&&n.append("creationDate",null===fe||void 0===fe?void 0:fe.creationDate),null!==fe&&void 0!==fe&&fe.categories&&n.append("categories",JSON.stringify(null===fe||void 0===fe?void 0:fe.categories)),null!==fe&&void 0!==fe&&fe.tags&&n.append("tags",JSON.stringify(null===fe||void 0===fe?void 0:fe.tags)),null!==fe&&void 0!==fe&&fe.image&&n.append("image",null===fe||void 0===fe?void 0:fe.image),K.Z.createBlog(n).then((function(e){var i,n=(null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.message)||"Blog created successfully..";(0,w.Qm)(n,3e3),t(I)})).catch((function(e){var i,t;console.error(e);var n=(null===e||void 0===e||null===(i=e.response)||void 0===i||null===(t=i.data)||void 0===t?void 0:t.message)||"Blog couldn't created..";(0,w.Jc)(n,5e3)}))},children:function(e){e.values;var i,t,n=e.errors,l=e.isValid,o=e.touched,r=e.handleBlur,d=e.handleChange,b=e.handleSubmit;return(0,T.jsx)("form",{onSubmit:b,children:(0,T.jsxs)(x.Z,{elevation:3,sx:{p:4},children:[(0,T.jsxs)(g.ZP,{container:!0,spacing:4,children:[(0,T.jsx)(g.ZP,{item:!0,xs:12,md:8,children:(0,T.jsxs)(g.ZP,{container:!0,spacing:2,children:[(0,T.jsx)(g.ZP,{item:!0,xs:12,children:(0,T.jsx)(Z.Z,{id:"title",variant:"outlined",type:"text",label:"Title",fullWidth:!0,autoFocus:!0,value:null===fe||void 0===fe?void 0:fe.title,name:"title",size:"small",required:!0,onChange:function(e){d(e),Ze(e)},onBlur:r,error:!(null===o||void 0===o||!o.title||null===n||void 0===n||!n.title),helperText:null!==o&&void 0!==o&&o.title&&null!==n&&void 0!==n&&n.title?null===n||void 0===n?void 0:n.title:""})}),(0,T.jsxs)(g.ZP,{item:!0,xs:12,children:[(0,T.jsx)("div",{children:(0,T.jsx)(P,{setValue:me,formData:fe})}),(0,T.jsx)("div",{})]}),(0,T.jsx)(g.ZP,{item:!0,xs:12,children:(0,T.jsx)(Z.Z,{id:"seoTitle",variant:"outlined",type:"text",label:"SEO Title",fullWidth:!0,value:null===fe||void 0===fe?void 0:fe.seoTitle,name:"seoTitle",size:"small",required:!0,onChange:function(e){d(e),Ze(e)},onBlur:r,error:!(null===o||void 0===o||!o.seoTitle||null===n||void 0===n||!n.seoTitle),helperText:null!==o&&void 0!==o&&o.seoTitle&&null!==n&&void 0!==n&&n.seoTitle?null===n||void 0===n?void 0:n.seoTitle:""})}),(0,T.jsx)(g.ZP,{item:!0,xs:12,children:(0,T.jsx)(Z.Z,{id:"metaDescription",variant:"outlined",type:"text",label:"meta Description",fullWidth:!0,value:null===fe||void 0===fe?void 0:fe.metaDescription,name:"metaDescription",size:"small",required:!0,multiline:!0,rows:2,onChange:function(e){d(e),Ze(e)},onBlur:r,error:!(null===o||void 0===o||!o.metaDescription||null===n||void 0===n||!n.metaDescription),helperText:null!==o&&void 0!==o&&o.metaDescription&&null!==n&&void 0!==n&&n.metaDescription?null===n||void 0===n?void 0:n.metaDescription:""})}),(0,T.jsxs)(g.ZP,{item:!0,xs:12,children:[(0,T.jsxs)(g.ZP,{container:!0,spacing:1,children:[(0,T.jsx)(g.ZP,{item:!0,xs:10,md:10,children:(0,T.jsx)(Z.Z,{id:"focusKeyphrases",variant:"outlined",type:"text",fullWidth:!0,label:"Focus KeyPhrases",name:"focusKeyphrases",size:"medium",value:ee,onChange:function(e){d(e),Ze(e)},onBlur:function(){return(null===le||void 0===le?void 0:le.length)<=0&&""==ee&&be("keyPhases")},error:!!(null!==y&&void 0!==y&&y.keyPhases&&(null===le||void 0===le?void 0:le.length)<=0),helperText:(null===le||void 0===le?void 0:le.length)<=0&&null!==B&&void 0!==B&&B.keyPhases?"Focus-key-phrase required":""})}),(0,T.jsx)(g.ZP,{item:!0,xs:2,md:2,textAlign:"center",children:(0,T.jsx)(p.Z,{variant:"contained",onClick:function(){return ye("focusKeyphrases")},sx:{backgroundColor:"#27488d"},children:"Add"})})]}),(0,T.jsx)(f.Z,{children:le.map((function(e,i){return(0,T.jsx)(j.Z,{sx:{m:1,mx:"5px",backgroundColor:"#b3e4e4",color:"#000"},label:e,onDelete:function(i){return function(e){oe(le.filter((function(i){return i!==e})))}(e)}},e+i)}))})]}),(0,T.jsx)(g.ZP,{item:!0,xs:12,children:(0,T.jsx)(Z.Z,{id:"slug",variant:"outlined",type:"text",label:"Slug",fullWidth:!0,value:null===fe||void 0===fe?void 0:fe.slug,name:"slug",size:"small",required:!0,onChange:function(e){d(e),Ze(e)},onBlur:r,error:!(null===o||void 0===o||!o.slug||null===n||void 0===n||!n.slug),helperText:null!==o&&void 0!==o&&o.slug&&null!==n&&void 0!==n&&n.slug?null===n||void 0===n?void 0:n.slug:""})})]})}),(0,T.jsx)(g.ZP,{item:!0,xs:12,md:4,children:(0,T.jsxs)(g.ZP,{container:!0,spacing:2,children:[(0,T.jsx)(g.ZP,{item:!0,xs:12,sm:6,md:12,children:(0,T.jsx)(x.Z,{elevation:1,sx:{borderRadius:4,"&:hover":{boxShadow:"0px 0px 20px -5px rgb(0 0 0 / 50%)"}},children:(0,T.jsxs)(g.ZP,{container:!0,sx:{flexDirection:"column",justifyContent:"space-evenly",alignItems:"center",p:2},spacing:1,children:[(0,T.jsx)(g.ZP,{item:!0,xs:12,children:(0,T.jsxs)(g.ZP,{container:!0,spacing:1,children:[(0,T.jsx)(g.ZP,{item:!0,xs:9,children:(0,T.jsx)(Z.Z,{id:"categoryAd",variant:"outlined",type:"text",label:"Add Category",name:"addCat",value:de,size:"small",onChange:function(e){var i;return ue(null===e||void 0===e||null===(i=e.target)||void 0===i?void 0:i.value)},onBlur:function(){return(null===fe||void 0===fe?void 0:fe.categories)&&(null===fe||void 0===fe?void 0:fe.categories.length)<=0&&be("category")},error:!!(null!==y&&void 0!==y&&y.category&&null!==fe&&void 0!==fe&&fe.categories&&(null===fe||void 0===fe?void 0:fe.categories.length)<=0),helperText:null!==fe&&void 0!==fe&&fe.categories&&(null===fe||void 0===fe?void 0:fe.categories.length)<=0&&null!==B&&void 0!==B&&B.category?"Categories are required":""})}),(0,T.jsx)(g.ZP,{item:!0,xs:2,children:(0,T.jsx)(p.Z,{variant:"contained",sx:{backgroundColor:"#27488d"},onClick:je,children:"Add"})})]})}),(0,T.jsx)(g.ZP,{item:!0,xs:12,alignSelf:"start",children:(0,T.jsxs)(u.Z,{component:"fieldset",variant:"standard",children:[(0,T.jsx)(h.Z,{component:"legend",sx:{fontSize:"1.25rem",fontWeight:500},children:"Category"}),(0,T.jsx)(v.Z,{onClick:function(e){!function(e){var i=null===e||void 0===e?void 0:e.target,t=i.name,n=i.checked,l=null===fe||void 0===fe?void 0:fe.categories;if(n)!l.includes(t)&&l.push(t);else{var o=l.findIndex((function(e){return e==t}));o>=0&&Array.isArray(l)&&l.splice(o,1)}me((0,s.Z)((0,s.Z)({},fe),{},{categories:l}))}(e)},children:Array.isArray(he)&&he.map((function(e,i){return(0,T.jsx)(c.Z,{control:(0,T.jsx)(a.Z,{name:"".concat(e)}),label:e,sx:{textTransform:"capitalize"}},e+""+i)}))})]})})]})})}),(0,T.jsx)(g.ZP,{item:!0,xs:12,sm:6,md:12,children:(0,T.jsx)(x.Z,{elevation:1,sx:{borderRadius:4,"&:hover":{boxShadow:"0px 0px 20px -5px rgb(0 0 0 / 50%)"}},children:(0,T.jsxs)(f.Z,{sx:{p:3},children:[(0,T.jsxs)(g.ZP,{container:!0,spacing:1,children:[(0,T.jsx)(g.ZP,{item:!0,xs:9,md:9,children:(0,T.jsx)(Z.Z,{id:"tags",variant:"outlined",type:"text",label:"Tags",name:"tags",size:"small",value:M,onChange:function(e){d(e),Ze(e)},onBlur:function(){return(null===G||void 0===G?void 0:G.length)<=0&&""==M&&be("tags")},error:!!(null!==y&&void 0!==y&&y.tags&&(null===G||void 0===G?void 0:G.length)<=0),helperText:(null===G||void 0===G?void 0:G.length)<=0&&null!==y&&void 0!==y&&y.tags?"Tags are required":""})}),(0,T.jsx)(g.ZP,{item:!0,xs:3,md:3,children:(0,T.jsx)(p.Z,{variant:"contained",onClick:function(){return ye("tag")},sx:{backgroundColor:"#27488d"},children:"Add"})})]}),(0,T.jsx)(f.Z,{children:G.map((function(e,i){return(0,T.jsx)(j.Z,{sx:{m:1,mx:"5px",backgroundColor:"#b3e4e4",color:"#000"},label:e,onDelete:function(i){return function(e){H(G.filter((function(i){return i!==e})))}(e)}},e+i)}))})]})})}),(0,T.jsx)(g.ZP,{item:!0,xs:12,children:(0,T.jsx)(x.Z,{elevation:1,sx:{borderRadius:4,"&:hover":{boxShadow:"0px 0px 20px -5px rgb(0 0 0 / 50%)"}},children:(0,T.jsxs)(g.ZP,{container:!0,sx:{p:3},children:[(0,T.jsx)(g.ZP,{item:!0,xs:12,children:(0,T.jsx)(m.Z,{variant:"h6",textAlign:"left",sx:{mb:2},children:"Featured Image"})}),(0,T.jsx)(g.ZP,{item:!0,xs:12,children:(0,T.jsxs)(f.Z,{sx:{position:"relative"},children:[(0,T.jsx)("img",{style:{width:"100%",border:"1px solid #ececec",borderRadius:10},src:W||"/image-thumb.jpeg"}),(0,T.jsx)("label",{htmlFor:"image",children:(0,T.jsx)("span",{style:{cursor:"pointer",padding:"0px 5px",position:"absolute",top:10,right:3},children:(0,T.jsx)(S.Z,{sx:{borderRadius:"30%",color:"#fff",backgroundColor:"#27488d",p:"5px"}})})}),(0,T.jsx)("input",{type:"file",id:"image",onChange:function(e){var i,t;!function(e){var i,t=null===e||void 0===e||null===(i=e.target)||void 0===i?void 0:i.files[0];O(t);var n=new FileReader;n.addEventListener("load",(function(){N(n.result)}),!1),t&&n.readAsDataURL(t)}(e);var n=null!==e&&void 0!==e&&null!==(i=e.target)&&void 0!==i&&i.files?null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.files[0]:"";fe.image=n},style:{display:"none"}})]})})]})})})]})})]}),(0,T.jsx)(g.ZP,{children:(0,T.jsx)("span",{style:{cursor:""!=(null===fe||void 0===fe?void 0:fe.title)&&(null===le||void 0===le?void 0:le.length)>=0&&null!==fe&&void 0!==fe&&fe.categories&&(null===fe||void 0===fe||null===(i=fe.categories)||void 0===i?void 0:i.length)>=0&&(null===G||void 0===G?void 0:G.length)>=0&&""!=(null===fe||void 0===fe?void 0:fe.image)&&""!=(null===fe||void 0===fe?void 0:fe.richText)&&l?"not-allowed":"default"},children:(0,T.jsx)(p.Z,{variant:"contained",type:"submit",size:"large",disabled:!(""!=(null===fe||void 0===fe?void 0:fe.title)&&(null===le||void 0===le?void 0:le.length)>=0&&null!==fe&&void 0!==fe&&fe.categories&&(null===fe||void 0===fe||null===(t=fe.categories)||void 0===t?void 0:t.length)>=0&&(null===G||void 0===G?void 0:G.length)>=0&&""!=(null===fe||void 0===fe?void 0:fe.image)&&""!=(null===fe||void 0===fe?void 0:fe.richText))||!l,endIcon:(0,T.jsx)(C.Z,{}),sx:{backgroundColor:"#27488d",mt:2},children:"Publish"})})})]})})}})]})})}},15238:function(e,i,t){var n=t(15671),l=t(43144),o=t(54110),s=function(){function e(){(0,n.Z)(this,e)}return(0,l.Z)(e,null,[{key:"createBlog",value:function(e){return o.b.post(o.z.api.blog.create,e)}},{key:"updateBlog",value:function(e,i){return o.b.put(o.z.api.blog.update+e,i)}},{key:"deleteBlog",value:function(e){return o.b.delete(o.z.api.blog.delete+e)}},{key:"fetchOneBlog",value:function(e){return o.b.get(o.z.api.blog.getOne+e)}},{key:"fetchAllBlogs",value:function(){return o.b.get(o.z.api.blog.getAll)}}]),e}();i.Z=s}}]);
//# sourceMappingURL=523.cf339fbe.chunk.js.map